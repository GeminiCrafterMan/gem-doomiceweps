class GWM_RocketLauncher : RocketLauncher
{
	Default
	{
		Weapon.AmmoUse 1;
		Weapon.AmmoUse2 1;
		Weapon.AmmoType "GWM_RocketAmmo";
		Weapon.AmmoType2 "GWM_RocketAmmo";
	}
	States
	{
		Ready:
			RKTL A 1 A_WeaponReady;
			Loop;
		Deselect:
			RKTL A 1 A_Lower;
			RKTL A 0 A_Lower;
			Loop;
		Select:
			RKTL A 1 A_Raise;
			RKTL A 0 A_Raise;
			Loop;
		Fire:
			RKTL A 8 {
				A_OverlayPivot(OverlayID(), 0.66, 1);
				A_Overlay(-2, "Flash");
				A_WeaponOffset(0, 24, WOF_ADD);
				A_StartSound("weapons/rocketfire", CHAN_WEAPON);
				A_FireMissile(); // Replace with custom rocket later
				A_OverlayScale(OverlayID(), 1.33, 0, WOF_INTERPOLATE);
			}
			RKTL A 3;
			RKTL AAA 3 {
				A_WeaponOffset(0, -8, WOF_ADD);
				A_OverlayScale(OverlayID(), -0.11, 0, WOF_ADD);
			}
			RTKL A 0 A_ReFire;
			Goto Ready;
		AltFire:
			RKTL A 8 {
				A_OverlayPivot(OverlayID(), 0.66, 1);
				A_Overlay(-2, "Flash");
				A_WeaponOffset(0, 24, WOF_ADD);
				A_StartSound("weapons/grenadefire", CHAN_WEAPON);
				A_FireSTGrenade(); // Replace with custom grenade later
				A_OverlayScale(OverlayID(), 1.33, 0, WOF_INTERPOLATE);
			}
			RKTL A 3;
			RKTL AAA 3 {
				A_WeaponOffset(0, -8, WOF_ADD);
				A_OverlayScale(OverlayID(), -0.11, 0, WOF_ADD);
			}
			RTKL A 0 A_ReFire;
			Goto Ready;
		Flash:
			RKTF A 3 Bright {
				A_Light1();
				A_OverlayPivot(OverlayID(), 0.66, 1);
				A_OverlayScale(OverlayID(), 1.33, 0, WOF_INTERPOLATE);
			}
			RKTF B 3 Bright A_Light2;
			Stop;
		Spawn:
			RKTL Z -1;
			Stop;
	}
}