class GWM_Player : DoomPlayer
{
	int prevPlayerState;
	float defaultFOV;
	override void Tick()
	{
		super.Tick();
		if (player && prevPlayerState != player.playerstate)
		{
			if (prevPlayerState == PST_DEAD && player.playerstate == PST_LIVE)	// for singleplayer resurrects
			{
				A_StartSound("player/respawn", CHAN_VOICE);
			}
			prevPlayerState = player.playerstate;
		}
	// Until I figure out what's wrong and why this breaks on random mapsets, this will be commented out.

		int buttons = GetPlayerInput(AAPTR_DEFAULT, MODINPUT_BUTTONS);
		if ((player && (player.cmd.buttons & BT_ZOOM && !(player.playerstate == PST_DEAD)) && (!(self.defaultFOV) || self.defaultFOV == 0)))
		{
			self.defaultFOV = player.desiredFOV;
			player.desiredFOV = self.defaultFOV/2;
		}
		else if ((player && (!(player.cmd.buttons & BT_ZOOM) || (player.playerstate == PST_DEAD)) && ((self.defaultFOV) || self.defaultFOV != 0)))
		{
			// edit this later to work with freeze death
			player.desiredFOV = self.defaultFOV;
			self.defaultFOV = 0;
		}

	}
	Default
	{
		Player.SoundClass "GWM_Player";
		Player.WeaponSlot 1, "GWM_Mine", "GWM_Fist", "GWM_Lumberjack", "GWM_Impactor", "GWM_Levenbrech";
		Player.WeaponSlot 2, "GWM_Pistol", "GWM_SMG", "GWM_Revolver", "GWM_GoldWand";
		Player.WeaponSlot 3, "GWM_IceShotgun", "GWM_PFSuperShotgun", "GWM_Shotgun", "GWM_SuperShotgun", "GWM_ImpalerCrossbow";
		Player.WeaponSlot 4, "GWM_Chaingun", "GWM_BurstRifle", "GWM_FrostFang";
		Player.WeaponSlot 5, "GWM_RocketLauncher", "GWM_VenomCannon";
		Player.WeaponSlot 6, "GWM_PlasmaRifle", "GWM_Melter", "GWM_NoiseCrusher";
		Player.WeaponSlot 7, "GWM_BFG9000", "GWM_NapalmLauncher";
	}
}

class GWM_DoomPlayer : GWM_Player
{
	Default
	{
		Player.StartItem "GWM_Pistol";
		Player.StartItem "GWM_Fist";
		Player.StartItem "GWM_Mine";
		Player.StartItem "GWM_LowCaliberClip", 50;
	}
}

class GWM_HereticPlayer : GWM_Player
{
	Default
	{
		Player.StartItem "GWM_GoldWand";
		Player.StartItem "GWM_Fist";
		Player.StartItem "GoldWandAmmo", 50;
		Player.ColorRange 224, 209;
	}
}